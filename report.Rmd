---
title: Prediction of activity of the subject through analysis of data from wearable
  devices
author: "Sandip Biswas"
date: "Friday, February 20, 2015"
output: html_document
---

Introduction
-------------
The group Groupware@LES conducted an experiment and collected data from wearable devices to recognize human activity. The details and the experimental data are given in their [website](http://groupware.les.inf.puc-rio.br/har). The data is collected from different experimental subjects performing excercises in different positions. The goal of this project is to train a model such that from the wearable device data, one can predict the position of excercise.

Data download and cleaning
--------------------------
We download the data and inspect it.

```{r, cache=TRUE}
if(!file.exists("C:/Users/sandip/Documents/Coursera/course8/HAR.csv")){
download.file(url ="http://d396qusza40orc.cloudfront.net/predmachlearn/pml-training.csv", destfile="C:/Users/sandip/Documents/Coursera/course8/HAR.csv", mode="wb")
wearabledata <- read.csv(file = "C:/Users/sandip/Documents/Coursera/course8/HAR.csv", header=TRUE, na.strings = c("#DIV/0!","NA"))
}
```
We treat the $"classe"$ as response variable and need to decide on a set of predictor variables from $159$ variables. To clean up the data set, we note that there are several missing $NA$ values. To estimate the columns that have large number of $NA$ and remove them.
```{r, cache=TRUE}
percentNA <- function(vec){
  NApercent <- round(sum(is.na(vec))/length(vec)*100,1)
  return(NApercent)
}
wearable.list <- as.list(wearabledata)
NAwearable <- lapply(X=wearable.list,FUN=percentNA)
wearableclean <- wearabledata[,-which(NAwearable>=90)]
```
Model training and cross validation
-----------------------------------
The number of variables have reduced to $59$. By inspection we see that some of them are related to index, timestamp etc. We do not consider them and consider only the predictor variables that are directly related to $classe$. We consider $user name$ as a predictor variable as we presume same subjects would perform activities in similar fashion and the training model should accomodate that.
We prepare the training dataset and extract a testing data set for cross validation. 
```{r,cache=TRUE,warning=FALSE,message=FALSE}
library(caret)
set.seed(12)
inTrain <- createDataPartition(y=wearableclean$classe,
                               p=0.7, list=FALSE)
training <- wearableclean[inTrain,][-c(1,3:7)]
testing <- wearableclean[-inTrain,][-c(1,3:7)]

```



